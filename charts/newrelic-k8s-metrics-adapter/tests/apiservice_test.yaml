suite: test naming helper for APIService's certmanager annotations and service name
templates:
  - templates/apiservice/apiservice.yaml
release:
  name: my-release
  namespace: my-namespace
tests:
  - it: Anotations are correctly defined
    set:
      certManager:
        enabled: true
    asserts:
      - equal:
          path: metadata.annotations.certmanager\.k8s\.io/inject-ca-from
          value: my-namespace/nri-my-release-newrelic-k8s-metrics-adapter-root-cert
      - equal:
          path: metadata.annotations.cert-manager\.io/inject-ca-from
          value: my-namespace/nri-my-release-newrelic-k8s-metrics-adapter-root-cert
